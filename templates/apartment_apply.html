<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
	<title>Apply for Apartment</title>
	<meta name="google-site-verification" content="gEiw9Swqs11DLP3QTgR8Y6hHGjQnhSWWud7LivLEmHs" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,200" />
	<link rel="stylesheet" href="https://www.gruettecloud.com/static/stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="icon" href="https://www.gruettecloud.com/static/gruettecloud_logo.png">
    <style>
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 90svh;
        }

        .application-form {
            display: flex;
            flex-direction: column;
        }

        input[type="text"], input[type="email"], input[type="password"], input[type="phone"], select, textarea {
            width: 100%;
            margin: 0;
            margin-bottom: 15px;
            border-radius: 30px;
            padding-left: 20px;
            background-color: transparent;
            border: 2px solid var(--box-shadow-color);
            color: var(--text-color);
            padding: 10px;
            resize: none;
        }
        
    </style>
</head>
<body>
	<div class="header">
        <div id="language-selection" onclick="toggleLanguageSelection()" style="cursor: pointer;">
            <img src="https://www.gruettecloud.com/static/icons/us.png" style="width: 30px; height: 30px;">
            <!--<img src="https://www.gruettecloud.com/static/icons/de.png" style="width: 30px; height: 30px;">-->
        </div>
		<div class="centered-content">
            <a href="/" class="logo" title="Home">
                <img src="https://www.gruettecloud.com/static/gruettecloud_logo.png" style="width: 40px; height: 40px;" title="GrütteCloud">
            </a>
        </div>
        {% include "components/nav-element.html" %}
	</div>


	<main>

        <section class="content">
            <h1 class="language" en-language="Apply for Apartment" de-language="Bewirb dich für ein Apartment">Apply for Apartment</h1>

            <div id="form-progress" style="display: flex; width: 300px; margin-bottom: 40px; gap: 20px; align-items: center;">
                <div id="progress1" style="color: var(--primary-color);">1</div>
                <hr id="progress2line" style="width: 100%; margin: 0; height: 1px; vertical-align: middle;" color="black">
                <div id="progress2">2</div>
                <hr id="progress3line" style="width: 100%; margin: 0; height: 1px; vertical-align: middle;" color="black">
                <div id="progress3">3</div>
                <hr id="progress4line" style="width: 100%; margin: 0; height: 1px; vertical-align: middle;" color="black">
                <div id="progress4">4</div>
                <hr id="progress5line" style="width: 100%; margin: 0; height: 1px; vertical-align: middle;" color="black">
                <div id="progress5">5</div>
            </div>
            
            
            <div class="application-form">
                <form action="/apply" method="POST" style="flex-direction: column;">
                    <div id="section1" style="display: flex; flex-direction: column;">
                        <input type="text" id="firstname" name="name" autocomplete="off" placeholder="Your name*" en-language="Your name*" de-language="Dein Name*" required>
                        <div style="display: inline-flex; width: 300px; margin: 0; gap: 10px;">
                            <input type="text" id="age" name="age" autocomplete="off" placeholder="Age*" en-language="Age*" de-language="Alter*" required>
                            <input type="text" id="pronouns" name="pronouns" autocomplete="off" placeholder="Pronouns" en-language="Pronouns" de-language="Pronomen">
                        </div>
                        <input type="text" id="email" name="email" autocomplete="off" placeholder="Email*" en-language="Email*" de-language="Email*" required>
                        <input type="text" id="move-in-date" name="move-in-date" autocomplete="off" placeholder="Preferred move-in date*" en-language="Preferred move-in date*" de-language="Bevorzugtes Einzugsdatum*" required>

                        <div style="display: inline-flex; width: 300px; gap: 20px;">
                            <div class="send-button" onclick="next()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-left: auto;">
                                <span class="language" en-language="Next" de-language="Weiter">Next</span>
                            </div>
                        </div>
                    </div>

                    <div id="section2" style="display: none; flex-direction: column;">
                        <input type="text" id="occupation" name="occupation" autocomplete="off" placeholder="Occupation or field of study*" en-language="Occupation or field of study*" de-language="Beruf oder Studienfach*" required>
                        <input type="text" id="language" name="language" autocomplete="off" placeholder="Language(s)*" en-language="Language(s)*" de-language="Sprache(n)*" required>
                        <select id="dietry-preferences" name="dietry-preferences" style="-webkit-appearance: none;">
                            <option value="" class="language" en-language="Dietry preferences" de-language="Deine Ernährungspräferenzen">Dietry preferences</option>
                            <option value="vegetarian" class="language" en-language="Vegetarian" de-language="Vegetarisch">Vegetarian</option>
                            <option value="vegan" class="language" en-language="Vegan" de-language="Vegan">Vegan</option>
                            <option value="pescetarian" class="language" en-language="Pescetarian" de-language="Pescetarisch">Pescetarian</option>
                            <option value="omnivore" class="language" en-language="Omnivore" de-language="Omnivor">Omnivore</option>
                        </select>
                        <select id="coffe-or-tea" name="coffe-or-tea" style="-webkit-appearance: none;" required>
                            <option value="" class="language" en-language="Coffee or tea?*" de-language="Kaffee oder Tee?*">Coffee or tea?*</option>
                            <option value="coffee" class="language" en-language="Coffee" de-language="Kaffee">Coffee</option>
                            <option value="tea" class="language" en-language="Tea" de-language="Tee">Tea</option>
                            <option value="both" class="language" en-language="Both" de-language="Beides">Both</option>
                            <option value="none" class="language" en-language="None" de-language="Keins">None</option>
                        </select>
                        <div style="display: inline-flex; width: 300px; gap: 20px;">
                            <div class="send-button" onclick="previous()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-right: auto; background-color: var(--box-shadow-color); color: var(--text-color);">
                                <span class="language" en-language="Previous" de-language="Zurück">Previous</span>
                            </div>
                            <div class="send-button" onclick="next()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-left: auto;">
                                <span class="language" en-language="Next" de-language="Weiter">Next</span>
                            </div>
                        </div>
                    </div>

                    <div id="section3" style="display: none; flex-direction: column;">
                        <textarea type="text" id="about" name="about" autocomplete="off" placeholder="Tell me a little bit about yourself. What are your hobbies and interests, why do you want to move in?*" en-language="Tell me a little bit about yourself. What are your hobbies and interests, why do you want to move in?*" de-language="Erzähl mir ein bisschen über dich. Was sind deine Hobbys und Interessen, warum möchtest du einziehen?*" style="height: 113px; border-radius: 20px;" required></textarea>
                        <textarea type="text" id="expectations" name="expectations" autocomplete="off" placeholder="What do you expect from your flat mate?*" en-language="What do you expect from your flat mate?*" de-language="Was erwartest du von deinem Mitbewohner?*" style="height: 75px; border-radius: 20px;" required></textarea>
                        <div style="display: inline-flex; width: 300px; gap: 20px;">
                            <div class="send-button" onclick="previous()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-right: auto; background-color: var(--box-shadow-color); color: var(--text-color);">
                                <span class="language" en-language="Previous" de-language="Zurück">Previous</span>
                            </div>
                            <div class="send-button" onclick="next()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-left: auto;">
                                <span class="language" en-language="Next" de-language="Weiter">Next</span>
                            </div>
                        </div>
                    </div>

                    <div id="section4" style="display: none; flex-direction: column;">
                        <textarea type="text" id="parties" name="parties" autocomplete="off" placeholder="What's your stand on apartment parties?" en-language="What's your stand on apartment parties?" de-language="Wie stehst du zu WG-Partys?" style="height: 95px; border-radius: 20px;"></textarea>
                        <div style="display: inline-flex; width: 300px; margin: 0; gap: 10px;">
                            <select id="alcohol" name="alcohol" style="-webkit-appearance: none;">
                                <option value="" class="language" en-language="Alcohol?" de-language="Trinkst Du?">Alcohol?</option>
                                <option value="yes" class="language" en-language="Yes" de-language="Ja">Yes</option>
                                <option value="no" class="language" en-language="No" de-language="Nein">No</option>
                            </select>
                            <select id="smoker" name="smoker" style="-webkit-appearance: none;">
                                <option value="" class="language" en-language="Smoker?" de-language="Rauchst Du?">Smoker?</option>
                                <option value="no" class="language" en-language="No" de-language="Nein">No</option>
                                <option value="yes" class="language" en-language="Yes" de-language="Ja">Yes</option>
                            </select>
                        </div>
                        <select id="shared-apartment-experience" name="shared-apartment-experience" style="-webkit-appearance: none;">
                            <option value="" class="language" en-language="Shared apartment experience?" de-language="Bereits WG-Erfahrung?">Shared apartment experience?</option>
                            <option value="yes" class="language" en-language="Yes" de-language="Ja">Yes</option>
                            <option value="no" class="language" en-language="No" de-language="Nein">No</option>
                        </select>
                        <div style="display: inline-flex; width: 300px; gap: 20px;">
                            <div class="send-button" onclick="previous()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-right: auto; background-color: var(--box-shadow-color); color: var(--text-color);">
                                <span class="language" en-language="Previous" de-language="Zurück">Previous</span>
                            </div>
                            <div class="send-button" onclick="next()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-left: auto;">
                                <span class="language" en-language="Next" de-language="Weiter">Next</span>
                            </div>
                        </div>
                    </div>

                    <div id="section5" style="display: none; flex-direction: column;">
                        <div style="display: flex; width: 300px; margin: 0; gap: 10px; padding-bottom: 15px; align-items: center; background-color: var(--box-shadow-color); border-radius: 20px; padding: 10px;">
                            <div>
                                <p>Upload a photo of yourself</p>
                                <div><small id="photo-filename"></small></div>
                                <div id="slected-preview">
                                    <img src="" id="photo-preview" style="width: 55px; height: 55px; border-radius: 50%; object-fit: cover;">
                                </div>
                            </div>
                            <input type="file" name="photo" id="photo" style="display: none;">
                            <label for="photo" style="width: 55px; height: 55px; margin: 0; padding: 5px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--box-shadow-color); border-radius: 50%; cursor: pointer;">
                                <span id="photo-label" class="material-symbols-outlined" style="font-size: 24px; display: flex;">add</span>
                                <span id="photo-label-close" class="material-symbols-outlined" style="font-size: 24px; display: none;">close</span>
                            </label>
                        </div>

                        <div style="display: inline-flex; width: 300px; gap: 20px;">
                            <div class="send-button" onclick="previous()" style="border-radius: 30px; cursor: pointer; text-align: center; margin-right: auto; background-color: var(--box-shadow-color); color: var(--text-color);">
                                <span class="language" en-language="Previous" de-language="Zurück">Previous</span>
                            </div>
                            <button type="submit" name="submit" class="send-button" style="border-radius: 30px; cursor: pointer; text-align: center; margin-left: auto;">
                                <span class="language" en-language="Apply" de-language="Bewerben" style="font-size: 1.2em;">Apply</span>
                            </button>
                        </div>
                    </div>

                </form>
            </div>
        </section>
    </main>
	<div id="cookie-banner"></div>
</body>
</html>

<script>
    // Known bug: when the user clicks on close, the filemanager is reopened
    document.addEventListener("DOMContentLoaded", function() {
        const photoInput = document.getElementById("photo");
        const photoLabel = document.getElementById("photo-label");
        const photoLabelClose = document.getElementById("photo-label-close");
        const photoFilename = document.getElementById("photo-filename");
        const photoPreview = document.getElementById("photo-preview");

        photoLabel.addEventListener("click", function() {
                photoInput.click();

        });

        photoLabelClose.addEventListener("click", function() {
                photoInput.value = "";
                photoLabelClose.style.display = "none";
                photoLabel.style.display = "flex";
                photoPreview.src = "";
                photoFilename.innerHTML = "";
        });

        photoInput.addEventListener("change", function() {
            if (photoInput.files.length != 0) {
                const selectedFile = photoInput.files[0];
                const reader = new FileReader();
                photoFilename.innerHTML = selectedFile.name;
                photoLabelClose.style.display = "flex";
                photoLabel.style.display = "none";
                reader.readAsDataURL(selectedFile);
                reader.onload = function() {
                    const dataURL = reader.result;
                    const photoPreview = document.getElementById("photo-preview");
                    photoPreview.src = dataURL;
                };
            }
        });
    });
</script>


<script>
    var languageSelection = document.getElementById("language-selection");

    // if useragent is german, change language selection to german
    if (navigator.language.includes("de")) {
        languageSelection.innerHTML = '<img src="https://www.gruettecloud.com/static/icons/de.png" style="width: 30px; height: 30px;">';
    }

    function toggleLanguageSelection() {
        // change the language selection icon
        if (languageSelection.innerHTML.includes("us.png")) {
            languageSelection.innerHTML = '<img src="https://www.gruettecloud.com/static/icons/de.png" style="width: 30px; height: 30px;">';
        } else {
            languageSelection.innerHTML = '<img src="https://www.gruettecloud.com/static/icons/us.png" style="width: 30px; height: 30px;">';
        }

        // change the language of the input fields
        var inputs = document.getElementsByTagName("input");
        for (var i = 0; i < inputs.length; i++) {
            if (languageSelection.innerHTML.includes("us.png")) {
                inputs[i].placeholder = inputs[i].getAttribute("en-language");
            } else {
                inputs[i].placeholder = inputs[i].getAttribute("de-language");
            }
        }

        // change the language of elements with the class "language"
        var languageElements = document.getElementsByClassName("language");
        for (var i = 0; i < languageElements.length; i++) {
            if (languageSelection.innerHTML.includes("us.png")) {
                languageElements[i].innerHTML = languageElements[i].getAttribute("en-language");
            } else {
                languageElements[i].innerHTML = languageElements[i].getAttribute("de-language");
            }
        }

        // change the language of the textarea
        var textareas = document.getElementsByTagName("textarea");
        for (var i = 0; i < textareas.length; i++) {
            if (languageSelection.innerHTML.includes("us.png")) {
                textareas[i].placeholder = textareas[i].getAttribute("en-language");
            } else {
                textareas[i].placeholder = textareas[i].getAttribute("de-language");
            }
        }
    }

    function next() {
        var section1 = document.getElementById("section1");
        var section2 = document.getElementById("section2");
        var section3 = document.getElementById("section3");
        var section4 = document.getElementById("section4");
        var section5 = document.getElementById("section5");

        var progress1 = document.getElementById("progress1");
        var progress2 = document.getElementById("progress2");
        var progress3 = document.getElementById("progress3");
        var progress4 = document.getElementById("progress4");
        var progress5 = document.getElementById("progress5");

        var progress2line = document.getElementById("progress2line");
        var progress3line = document.getElementById("progress3line");
        var progress4line = document.getElementById("progress4line");
        var progress5line = document.getElementById("progress5line");

        if (section1.style.display == "flex") {
            section1.style.display = "none";
            section2.style.display = "flex";
            progress2.style.color = "var(--primary-color)";
            progress2line.color = "#007AFF";
        } else if (section2.style.display == "flex") {
            section2.style.display = "none";
            section3.style.display = "flex";
            progress3.style.color = "var(--primary-color)";
            progress3line.color = "#007AFF";
        } else if (section3.style.display == "flex") {
            section3.style.display = "none";
            section4.style.display = "flex";
            progress4.style.color = "var(--primary-color)";
            progress4line.color = "#007AFF";
        } else if (section4.style.display == "flex") {
            section4.style.display = "none";
            section5.style.display = "flex";
            progress5.style.color = "var(--primary-color)";
            progress5line.color = "#007AFF";
        }
    }

    function previous() {
        var section1 = document.getElementById("section1");
        var section2 = document.getElementById("section2");
        var section3 = document.getElementById("section3");
        var section4 = document.getElementById("section4");
        var section5 = document.getElementById("section5");

        var progress1 = document.getElementById("progress1");
        var progress2 = document.getElementById("progress2");
        var progress3 = document.getElementById("progress3");
        var progress4 = document.getElementById("progress4");
        var progress5 = document.getElementById("progress5");

        var progress2line = document.getElementById("progress2line");
        var progress3line = document.getElementById("progress3line");
        var progress4line = document.getElementById("progress4line");
        var progress5line = document.getElementById("progress5line");

        if (section2.style.display == "flex") {
            section2.style.display = "none";
            section1.style.display = "flex";
            progress1.style.color = "var(--primary-color)";
            progress2.style.color = "var(--text-color)";
            progress2line.color = "black";
        } else if (section3.style.display == "flex") {
            section3.style.display = "none";
            section2.style.display = "flex";
            progress2.style.color = "var(--primary-color)";
            progress3.style.color = "var(--text-color)";
            progress3line.color = "black";
        } else if (section4.style.display == "flex") {
            section4.style.display = "none";
            section3.style.display = "flex";
            progress3.style.color = "var(--primary-color)";
            progress4.style.color = "var(--text-color)";
            progress4line.color = "black";
        } else if (section5.style.display == "flex") {
            section5.style.display = "none";
            section4.style.display = "flex";
            progress4.style.color = "var(--primary-color)";
            progress5.style.color = "var(--text-color)";
            progress5line.color = "black";
        }
    }

</script>



<script src="https://www.gruettecloud.com/static/cookies.js"></script>