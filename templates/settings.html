<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>GrütteID | GrütteCloud</title>
    <meta name="google-site-verification" content="gEiw9Swqs11DLP3QTgR8Y6hHGjQnhSWWud7LivLEmHs" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,200" />
    <link rel="stylesheet" href="https://www.gruettecloud.com/static/stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="icon" href="https://www.gruettecloud.com/static/GrütteID.png">
    <script src="https://www.gruettecloud.com/static/switchservice.js"></script>

    <style>
        .dynamic-container {
          display: flex;
          flex-wrap: wrap;
        }
      
        .box {
          box-sizing: border-box;
          text-align: center;
        }

        .clearfix {
          clear: both;
        }

        .hover-blue {
            background-color: var(--background-tile-color);
            border: solid;
            border-width: 2px;
            border-color: var(--box-shadow-color);
            
            padding: 10px 20px;
            color: var(--text-color);
            cursor: pointer;
            width: 100%;
            max-width: 300px;
            -webkit-appearance: none;
        }

        .hover-blue:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: var(--white-color);
        }
      
        @media (max-width: 1200px) {
            .box {
                width: 100%;
            }

            .showdesktop {
                display: none;
            }

            .hidedesktop {
                display: block;
            }
        }

        @media (min-width: 1200px) {
            .box.left {
                padding-right: 10px;
                width: 50%;
            }

            .box.right {
                padding-left: 10px;
                width: 50%;
            }

            .showdesktop {
                display: flex;
            }

            .hidedesktop {
                display: none;
            }
        }
      </style>
</head>
<body>

    <div class="header">
        <div class="dark-mode-toggle">
            <span id="darkModeToggle" class="material-symbols-outlined white-button-blue-on-hover" title="Darkmode">light_mode</span>&nbsp;&nbsp;&nbsp;&nbsp;
        </div>
        <div class="centered-content">
            <a href="/settings" class="logo" title="Home">
                <img src="https://www.gruettecloud.com/static/GrütteID.png" style="width: 40px; height: 40px;" title="GrütteID">
            </a>
        </div>
        <div style="position: absolute; top: 20px; right: 0; transform: translateX(100%-20px); padding-right: 20px">
            <div class="dropdown">
                <button class="white-button-blue-on-hover" onclick="toggleDropdown()" style="background-color: var(--background-color); border: none;">
                    <span class="material-symbols-outlined" title="GrütteCloud">apps</span>
                </button>
                <div class="dropdown-menu animate__animated animate__zoomIn" style="z-index: 2; padding: 20px; text-align: center; border-radius: 20px;">
                    {% if menu %}
                        <img src="https://www.gruettecloud.com/static/profile_pictures/{{ menu["pfp"] }}" style="width: 80px; height: 80px; margin-bottom: 10px; border-radius: 50%;">
                    {% endif %}
                    <h1 style="display: flex; align-items: center; justify-content: center; font-size: 1.5em;">
                        {% if menu %}
                            Hi, {{ menu["username"] }}!
                        {% else %}
                            Hi, there!
                        {% endif %}
                    </h1>
                    {% if menu %}
                        <a href="/settings" title="Manage Account" style="background-color: var(--primary-color); border-radius: 20px; color: var(--white-color);">Manage Account</a>
                    {% else %}
                        <a href="/" title="Get Started" style="background-color: var(--primary-color); border-radius: 20px; color: var(--white-color);">Get Started</a>
                    {% endif %}
                    <hr style="display: block; border: 1px solid var(--secondary-color); border-radius: 5px; margin-top: 20px; margin-bottom: 20px;">
                    <a href="/home" title="Discover" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">explore</span>&nbsp;&nbsp;Home</a>
                    <a href="/chat" title="GrütteChat" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">forum</span>&nbsp;&nbsp;GrütteChat</a>
                    <a href="/storage" title="GrütteStorage" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">cloud_upload</span>&nbsp;&nbsp;GrütteStorage</a>
                    <hr style="display: block; border: 1px solid var(--secondary-color); border-radius: 5px; margin-top: 20px; margin-bottom: 20px;">
                    {% if menu %}
                        <a href="/logout" title="Logout" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">logout</span>&nbsp;&nbsp;Logout</a>
                    {% else %}
                        <a href="/about" title="About" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">info</span>&nbsp;&nbsp;About</a>
                        <a href="/terms" title="Terms of Service" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">description</span>&nbsp;&nbsp;Terms of Service</a>
                        <a href="/privacy" title="Privacy Policy" style="text-align: left;"><span class="material-symbols-outlined align-icons-center">privacy_tip</span>&nbsp;&nbsp;Privacy Policy</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {% if error %}
        <div id="error-message" style="display: none;">
            <div class="wrapping-tile" style="text-align: center; color: var(--yellow); border-radius: 30px;">
                {{ error }}
            </div>
            <div class="spaced-tile"></div>
        </div>
    {% endif %}
    {% if not has_premium %}
        <a href="/premium" style="text-decoration: none; color: var(--white-color);">
            <div class="wrapping-tile" style="text-align: center; background-color: var(--purple); padding: 20px; border-radius: 30px;">
                <h1>Unlock GrütteCloud PLUS</h1>
                for only 2.99€ once!
                <!-- It's free! -->
            </div>
        </a>
        <div class="spaced-tile"></div>
    {% endif %}
    <div class="dynamic-container">

        <div class="box left" style="margin-bottom: 20px;">
            <div id="changeUsername" class="animate__animated animate__zoomIn wrapping-tile" style="padding: 20px; border-radius: 30px; display: none; margin-bottom: 20px;">
                <div style="position: absolute; top: 15px; right: 20px;">
                    <button onclick="toggleChangeUsername()" class="send-button" style="width: 40px; height: 40px; border-radius: 20px; text-align: center; display: flex; align-items: center; justify-content: center; background-color: transparent; color: var(--text-color);">
                        <span class="material-symbols-outlined" title="Close">close</span>
                    </button>
                </div>
                <h1>Change username</h1>
                <form action="/change_username" method="POST" id="change_username" style="display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
                    <input type="text" id="new_username" name="new_username" placeholder="New username" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="password" id="password" name="password" placeholder="Password" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; margin-top: 20px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="submit" value="Change username" class="settings-button" style="min-width: 100%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;">
                </form>
            </div>

            <div id="changeEmail" class="animate__animated animate__zoomIn wrapping-tile" style="padding: 20px; border-radius: 30px; display: none; margin-bottom: 20px;">
                <div style="position: absolute; top: 15px; right: 20px;">
                    <button onclick="toggleChangeEmail()" class="send-button" style="width: 40px; height: 40px; border-radius: 20px; text-align: center; display: flex; align-items: center; justify-content: center; background-color: transparent; color: var(--text-color);">
                        <span class="material-symbols-outlined" title="Close">close</span>
                    </button>
                </div>
                <h1>Change email</h1>
                <form action="/change_email" method="POST" id="change_email" style="display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
                    <input type="text" id="new_email" name="new_email" placeholder="New email" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="password" id="password" name="password" placeholder="Password" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; margin-top: 20px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="submit" value="Change email" class="settings-button" style="min-width: 100%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;">
                </form>
            </div>

            <div id="changePassword" class="animate__animated animate__zoomIn wrapping-tile" style="padding: 20px; border-radius: 30px; display: none; margin-bottom: 20px;">
                <div style="position: absolute; top: 15px; right: 20px;">
                    <button onclick="toggleChangePassword()" class="send-button" style="width: 40px; height: 40px; border-radius: 20px; text-align: center; display: flex; align-items: center; justify-content: center; background-color: transparent; color: var(--text-color);">
                        <span class="material-symbols-outlined" title="Close">close</span>
                    </button>
                </div>
                <h1>Change password</h1>
                <form action="/change_password" method="POST" id="change_password" style="display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
                    <input type="password" id="old_password" name="old_password" placeholder="Old password" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="password" id="new_password" name="new_password" placeholder="New password" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; margin-top: 20px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="submit" value="Change password" class="settings-button" style="min-width: 100%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;">
                </form>
            </div>

            <div id="deleteAccount" class="animate__animated animate__zoomIn wrapping-tile" style="padding: 20px; border-radius: 30px; display: none; margin-bottom: 20px;">
                <div style="position: absolute; top: 15px; right: 20px;">
                    <button onclick="toggleDeleteAccount()" class="send-button" style="width: 40px; height: 40px; border-radius: 20px; text-align: center; display: flex; align-items: center; justify-content: center; background-color: transparent; color: var(--text-color);">
                        <span class="material-symbols-outlined" title="Close">close</span>
                    </button>
                </div>
                <h1>Delete account</h1>
                <form action="/delete_account" method="POST" id="delete_account" style="display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
                    <input type="text" id="username" name="username" placeholder="Your username" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="password" id="password" name="password" placeholder="Your password" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; margin-top: 20px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <input type="email" id="email" name="email" placeholder="Your email" autocomplete="off" required class="login-input" style="width: 100%; margin: 0px; margin-top: 20px; border-radius: 30px; padding-left: 20px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);">
                    <select name="reason" class="login-input" style="-webkit-appearance: none; width: 100%; margin-bottom: 20px; border-radius: 30px; background-color: var(--background-tile-color); border: 2px solid var(--box-shadow-color);" required>
                        <option value="">Please select a reason</option>
                        <option value="Not interested">I am not interested in GrütteCloud anymore</option>
                        <option value="Emails annoying">The emails are annoying</option>
                        <option value="Bad features">I don't like the current features</option>
                        <option value="Bad support">The support is bad</option>
                        <option value="Bad design">The design is bad</option>
                        <option value="Bad performance">The performance is bad</option>
                        <option value="Doesnt like Jan">I don't like Jan :(</option>
                        <option value="Other">Something else</option>
                    </select>
                    <textarea name="message" resizable="false;" maxlength="500" placeholder="Your message (optional)" autocomplete="off" class="login-input" style="resize: none; width: 100%; margin: 0px; border-radius: 30px; padding-left: 20px; padding-top: 10px; padding-bottom: 10px; background-color: transparent; border: 2px solid var(--box-shadow-color); color: var(--text-color);"></textarea>
                    <input type="submit" value="Delete account forever" class="delete-account-button" style="min-width: 100%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;">
                </form>
            </div>

            <div id="changeProfilePicture" class="animate__animated animate__zoomIn wrapping-tile" style="padding: 20px; border-radius: 30px; display: none; margin-bottom: 20px;">
                <div style="position: absolute; top: 15px; right: 20px;">
                    <button onclick="toggleChangeProfilePicture()" class="send-button" style="width: 40px; height: 40px; border-radius: 20px; text-align: center; display: flex; align-items: center; justify-content: center; background-color: transparent; color: var(--text-color);">
                        <span class="material-symbols-outlined" title="Close">close</span>
                    </button>
                </div>
                <h1>Edit profile picture</h1>
                <div style="display: flex; gap: 20px; width: 100%;">
                    <div style="text-align: center; width: 50%;">
                        <a href="/remove_pfp" title="Remove profile picture" style="text-decoration: none; color: var(--white-color);">
                            <button class="settings-button" style="margin: 0; min-width: 100%; height: 45px; font-size: 17px; background-color: var(--red); text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;"><span class="material-symbols-outlined" style="margin-right: 10px;">no_photography</span>Remove</button>
                        </a>
                    </div>
                    <div style="text-align: center; width: 50%;">
                        <form action="/change_pfp" method="post" enctype="multipart/form-data" id="uploadForm">
                            <input type="file" name="profilePicture" accept="image/*" style="display: none;" id="profilePictureInput">
                            <label title="Upload new image" class="settings-button" for="profilePictureInput" style="margin: 0; min-width: 100%; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer;"><span class="material-symbols-outlined" style="margin-right: 10px;">add_a_photo</span>Upload</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="wrapping-tile" style="padding: 20px; border-radius: 30px;">
                <h1>GrütteID</h1>
                <div class="dynamic-container">
                    <div class="box left">
                        <div style="display: flex; flex-direction: column; align-items: center;">
                            <img src="https://www.gruettecloud.com/static/profile_pictures/{{ menu["pfp"] }}" style="width: auto; max-height: 172px; margin-bottom: 20px; border-radius: 50%;">
                            <h2 style="margin: 0; margin-bottom: 30px; display: flex; align-items: center; justify-content: center;">
                                {{ menu["username"] }}
                                {% if verified %}<span class="material-symbols-outlined" style="margin-left: 5px; color: var(--primary-color);">verified</span>{% endif %}
                                {% if admin %}<span title="GrütteCloud Admin" class="material-symbols-outlined" style="margin-left: 5px; color: var(--indigo);">code</span>{% endif %}
                                {% if has_premium %}<span title="GrütteCloud PLUS Member" class="material-symbols-outlined" style="margin-left: 5px; color: var(--purple);">workspace_premium</span>{% endif %}
                            </h2>
                            <p>{{ email }}</p>
                            <p style="margin-bottom: 20px;">Joined on {{ created_at }}</p>
                        </div>
                    </div>
                    <div class="box right">
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                            <button class="hover-blue" style="margin: 0; min-width: 50%; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;" onclick="toggleChangeProfilePicture()"><span class="material-symbols-outlined" style="margin-right: 10px;">add_a_photo</span>Change profile picture</button>
                            <button class="hover-blue" style="min-width: 50%; margin-top: 20px;text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;" onclick="toggleChangeUsername()"><span class="material-symbols-outlined" style="margin-right: 10px;">edit</span>Change username</button>
                            <button class="hover-blue" style="min-width: 50%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;" onclick="toggleChangeEmail()"><span class="material-symbols-outlined" style="margin-right: 10px;">mail</span>Change email</button>
                            <button class="hover-blue" style="min-width: 50%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;" onclick="toggleChangePassword()"><span class="material-symbols-outlined" style="margin-right: 10px;">key</span>Change password</button>
                            <button class="settings-button" style="background-color: var(--red); min-width: 50%; margin-top: 20px; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;" onclick="toggleDeleteAccount()"><span class="material-symbols-outlined" style="margin-right: 10px;">person_cancel</span>Delete account</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="box right">
            <div class="wrapping-tile" style="padding: 15px; border-radius: 30px;">
                <h1>MyAI personality</h1>
                <select id="color" name="myAI" onchange="location = this.value;" class="login-input" style="-webkit-appearance: none; width: 100%; padding-left: 20px; border-radius: 30px; background-color: var(--background-tile-color); margin: 0; border: 2px solid var(--box-shadow-color);">
                    {% if selected_personality != 'Default' %}
                    <option value="/change_ai_personality/{{ selected_personality }}">{{ selected_personality }}</option>
                    {% endif %}
                    <option value="/change_ai_personality/Default">Default</option>
                    {% if selected_personality != 'UwuGirl'%}
                        <option value="/change_ai_personality/UwuGirl">Uwu Girl (NSFW)</option>
                    {% endif %}
                    {% if selected_personality != 'LeeKnow'%}
                        <option value="/change_ai_personality/LeeKnow">Lee Know</option>
                    {% endif %}
                    {% if selected_personality != 'Pirate'%}
                        <option value="/change_ai_personality/Pirate">Pirate</option>
                    {% endif %}
                    {% if selected_personality != 'Pistachio'%}
                        <option value="/change_ai_personality/Pistachio">Pistachio the dinosaur</option>
                    {% endif %}
                    {% if selected_personality != 'Backus'%}
                        <option value="/change_ai_personality/Backus">Backus (BNF inventor)</option>
                    {% endif %}
                    {% if selected_personality != 'Lorde'%}
                        <option value="/change_ai_personality/Lorde">Lorde</option>
                    {% endif %}
                </select>
                {% if display_back_to_ai %}
                    <a href="/ai/chat" style="text-decoration: none;">
                        <div class="ai-personality-button" style="margin-top: 20px; background-color: var(--purple); color: var(--white-color); border: none;">
                            Back to MyAI
                        </div>
                    </a>
                {% endif %}
            </div>

            <div class="wrapping-tile" style="padding: 20px; border-radius: 30px; margin-top: 20px;">
                <h1>Two-Factor Authentication</h1>
                <div class="dynamic-container">
                    <div class="box left">
                        {% if is_two_fa_enabled %}
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <div>
                                    <div class="qr-code" style="display: flex; flex-direction: column; align-items: center; width: 200px; height: 200px; border-radius: 30px;"></div>
                                </div>
                            </div>
                        {% else %}
                            <p>Two-Factor Authentication (2FA) is a feature that adds an extra layer of security to your GrütteID.</p>
                        {% endif %}
                    </div>
                    <div class="box right">
                        {% if is_two_fa_enabled %}
                            <p>You have enabled 2FA.</p><br><p>Please scan this code with your authenticator app.</p>If you want to disable it, click the button below. You can also generate a new code.</p>
                            <div style="display: flex; flex-direction: inline-flex; align-items: center; justify-content: center; margin-top: 20px;">
                                <a href="/2fa/refresh" class="settings-button" style="margin-top: 0; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;"><span class="material-symbols-outlined" style="margin-right: 10px;">refresh</span>Refresh</a>
                                <a href="/2fa/disable" class="settings-button" style="background-color: var(--red); margin-top: 0; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;"><span class="material-symbols-outlined" style="margin-right: 10px;">remove_moderator</span>Disable</a>
                            </div>
                        {% else %}
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <div class="spaced-tile hidedesktop"></div>
                                <a href="/2fa/enable" class="settings-button" style="margin-top: 0; text-decoration: none; border-radius: 30px; display: flex; align-items: center; justify-content: center;"><span class="material-symbols-outlined" style="margin-right: 5px;">encrypted</span>Enable 2FA</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="wrapping-tile" style="padding: 20px; border-radius: 30px; margin-top: 20px;">
                <h1>Default App</h1>
                <select onchange="location = this.value;" name="reason" class="login-input" style="-webkit-appearance: none; width: 100%; margin: 0px; border-radius: 30px; background-color: var(--background-tile-color); border: 2px solid var(--box-shadow-color);" required>
                    {% if default_app == 'chat' %}
                        <option value="/change_default_app/chat">GrütteChat</option>
                        <option value="/change_default_app/storage">GrütteStorage</option>
                    {% else %}
                        <option value="/change_default_app/storage">GrütteStorage</option>
                        <option value="/change_default_app/chat">GrütteChat</option>
                    {% endif %}
                </select>
            </div>
        </div>

    </div>

    <div id="cookie-banner"></div>

    <div style="display: flex; justify-content: center; padding: 20px; box-sizing: border-box; margin-top: auto;">
        <div style="display: flex;">
            <div style="width: 50%; margin-right: 20px; text-align: left;">
                <b style="font-size: 0.9em;">GrütteCloud</b>
                <div style="white-space: nowrap; line-height: 1em;">
                    <a class="footer-link" href="/help">Help Center</a><br>
                    <a class="footer-link" href="/discover">What is GrütteCloud?</a><br>
                    <a class="footer-link" href="/support">Contact Support</a>
                </div>
            </div>
            <div style="width: 50%; text-align: left;">
                <b style="font-size: 0.9em;">Legal</b>
                <div style="white-space: nowrap; line-height: 1em;">
                    <a class="footer-link" href="/about">Über Uns</a><br>
                    <a class="footer-link" href="/terms">Terms of Service</a><br>
                    <a class="footer-link" href="/privacy">Privacy Policy</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>


<script>
    // Dark mode toggle functionality
    var darkModeToggle = document.getElementById('darkModeToggle');
    var body = document.body;
    var isDarkMode = localStorage.getItem('darkMode');

    if (isDarkMode === 'true') {
        body.classList.add('dark-mode');
        document.documentElement.setAttribute('data-theme', 'dark');
        darkModeToggle.innerHTML = 'dark_mode'; // Change the inner HTML to the dark mode icon
    }

    darkModeToggle.addEventListener('click', function() {
        if (body.classList.contains('dark-mode')) {
            body.classList.remove('dark-mode');
            localStorage.setItem('darkMode', 'false');
            document.documentElement.setAttribute('data-theme', 'light');
            darkModeToggle.innerHTML = 'light_mode'; // Change the inner HTML to the light mode icon
        } else {
            body.classList.add('dark-mode');
            localStorage.setItem('darkMode', 'true');
            document.documentElement.setAttribute('data-theme', 'dark');
            darkModeToggle.innerHTML = 'dark_mode'; // Change the inner HTML to the dark mode icon
        }
    });

    darkModeToggle.style.cursor = 'pointer'; // Add this line to change the cursor to a pointer on hover
</script>

<script>
    // Show status message and fade out after 5 seconds
    var statusMessage = document.getElementById('error-message');
    {% if error %}
    statusMessage.style.display = 'block';
        setTimeout(function() {
            statusMessage.style.opacity = '0';
            setTimeout(function() {
                statusMessage.style.display = 'none';
                statusMessage.style.opacity = '1';
            }, 500);
            window.location.href = '/settings';
        }, 5000);
    {% endif %}
</script>

<script src="https://www.gruettecloud.com/static/cookies.js"></script>

<script src="https://www.gruettecloud.com/static/qrcode.min.js"></script>

<!-- Script to generate the QR code -->
<script>
    // JavaScript code to generate the QR code
    const qrCodeContainers = document.getElementsByClassName('qr-code');
    const qrCodeData = "{{ qr_code_data }}"; // Replace this with the actual data for the QR code

    // Convert the HTMLCollection to an array
    const qrCodeArray = Array.from(qrCodeContainers);

    qrCodeArray.forEach((qrCodeContainer) => {
        // Create the QR code using qrcode.js
        const qrcode = new QRCode(qrCodeContainer, {
            text: qrCodeData,
            width: 200,
            height: 200,
        });
    });
</script>

<script>
    var changeUsername = document.getElementById('changeUsername');
    var changeEmail = document.getElementById('changeEmail');
    var changePassword = document.getElementById('changePassword');
    var deleteAccount = document.getElementById('deleteAccount');
    var changeProfilePicture = document.getElementById('changeProfilePicture');

    function toggleChangeUsername() {
        if (changeUsername.style.display == 'block') {
            changeUsername.style.display = 'none';
        } else {
            changeUsername.style.display = 'block';
        }
        changeEmail.style.display = 'none';
        changePassword.style.display = 'none';
        deleteAccount.style.display = 'none';
        changeProfilePicture.style.display = 'none';
    }

    function toggleChangeEmail() {
        if (changeEmail.style.display == 'block') {
            changeEmail.style.display = 'none';
        } else {
            changeEmail.style.display = 'block';
        }
        changeUsername.style.display = 'none';
        changePassword.style.display = 'none';
        deleteAccount.style.display = 'none';
        changeProfilePicture.style.display = 'none';
    }

    function toggleChangePassword() {
        if (changePassword.style.display == 'block') {
            changePassword.style.display = 'none';
        } else {
            changePassword.style.display = 'block';
        }
        changeUsername.style.display = 'none';
        changeEmail.style.display = 'none';
        deleteAccount.style.display = 'none';
        changeProfilePicture.style.display = 'none';
    }

    function toggleDeleteAccount() {
        if (deleteAccount.style.display == 'block') {
            deleteAccount.style.display = 'none';
        } else {
            deleteAccount.style.display = 'block';
        }
        changeUsername.style.display = 'none';
        changeEmail.style.display = 'none';
        changePassword.style.display = 'none';
        changeProfilePicture.style.display = 'none';
    }

    function toggleChangeProfilePicture() {
        if (changeProfilePicture.style.display == 'block') {
            changeProfilePicture.style.display = 'none';
        } else {
            changeProfilePicture.style.display = 'block';
        }
        changeUsername.style.display = 'none';
        changeEmail.style.display = 'none';
        changePassword.style.display = 'none';
        deleteAccount.style.display = 'none';
    }

    profilePictureInput.addEventListener('change', function() {
        document.getElementById('uploadForm').submit();
    });
</script>